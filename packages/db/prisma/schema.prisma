
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String        @id @default(uuid())
  username  String        @unique
  password  String        
  name      String
  rooms     Room[]        @relation("roomAdmin")
  moves     Move[]       
  winner    Room[]        @relation("roomWinner")
}

model Room {
  id        Int           @id @default(autoincrement())
  name      String        @unique
  createdAt DateTime      @default(now())
  active    Boolean?       @default(true)
  adminId   String        
  admin     User          @relation("roomAdmin",fields: [adminId],references: [id])
  moves     Move[]
  winnerId  String?
  winner    User?          @relation("roomWinner",fields: [winnerId],references: [id])
}

model Move {
  id        Int           @id @default(autoincrement())
  move      String
  createdAt DateTime      @default(now())
  userId    String
  user      User          @relation(fields: [userId],references: [id])
  roomId    Int
  room      Room          @relation(fields: [roomId],references: [id])
}


